# Элементы изображений (img / picture / svg / figure)


## Общее
**CSS: Блочный элемент**
- Часто элементы изображений являются строчно-блочными `inline-block`
- Из-за этого появляется пробел под изображением
- Чтобы этого избежать, нужно делать элементы блочными
- Пример: `display: block`

**CSS: Максимальная ширина**
- Если оригинальный размер изображения больше элемента, изображение может выпадать
- Чтобы этого избежать, для изображения следует задавать ограничение максимального размера
- Пример: `max-inline-size: 100%` или `max-width: 100%`

**HTML: Видимая подпись**
- Тег `<figcaption>`
- Содержит дополнительную информациию об изображении: автора, ссылку на оригинал, авторские наблюдения и замечания
- Используется только внутри тега `<figure>`
- Содержимое не должно повторять содержимое атрибута "alt" изображения
- Пример:
```html
  <figure>
    <img src="cat.jpg">
    <figcaption>Фотография автора Ивана Иванова</figcaption>
  </figure>
```



## Контентные изображения
**HTML: Тег**
- Тег `<img>` или `<svg>`
- Контентная графика должна вставляться в разметке с помощью соответствующих тегов

**HTML: Ширина изображения**
- Атрибут `width`
- Содержит ширину области, выделяемой браузером, ещё до загрузки изображения
- Пример: `width="180"`

**HTML: Высота изображения**
- Атрибут `height`
- Содержит высота области, выделяемой браузером, ещё до загрузки изображения
- Если задан, может мешать работе свойства `aspect-ratio`
- Пример: `height="180"`

**A11y: Доступное название**
- Использовать атрибут `aria-labelledby`
- Иначе, использовать `aria-label`
- Иначе, использовать `alt`
- Иначе, использовать `title`
- Источник: https://x.com/tuantrungvo/status/1710901776311107630?s=20


**A11y: Доступное описание**
- Атрибут `alt` (если изображение SVG — `aria-label`)
- Содержит ёмкое описание того, что изображено на картинке
  - Содержимое атрибута отображается, если изображение не загрузилось
  - В конце описания ставить точку для интонационной паузы при чтении скринридером
- Если нет возможности указать описание, всё равно добавлять пустой атрибут `alt`
  - Иначе скринридер может озвучить URL-адрес
- SVG
  - В SVG-элементах нет возможности задать описание в `alt`, поэтому только в атрибуте `aria-label`

**CSS: Фон под изображением**
- Полезно задавать фон под изображением
- Если над изображениями есть текст, его можно будет прочитать ещё до загрузки изображения

**CSS: Картинка не загрузилась**
- Если картинка не загрузилась, браузеры вместо неё подставляют "Shadow DOM", поэтому можно добавлять псевдоэлемент `::before` и `::after`
- Стилизация текста для элемента `<img>` наследутеся текстом псевдоэлементов
- Можно стилизовать иконку и подпись в "Shadow DOM"
- Стили в CSS-файле

**CSS: Соотношение сторон**
- Свойство `aspect-ratio`
- Может не работать, если в разметке задан атрибут `height`

**SVG: Роль**
- Атрибут `role`
- Если внутри SVG находится контентное изображение, важно указать роль
- Пример: `role="img"`

**SVG: Доступное подробное описание**
- Если на SVG много информации, её можно подробно описать внутри `<svg>` в элементе `<desc>`, а из `<svg>` указать `id` в атрибуте `aria-described-by`
- Пример:
```html
  <svg aria-label="Описание" aria-described-by="desc">
    <desc id="desc">Подробное описание графического элемента.</desc>
  </svg>
```

**JS: Фолбэк при ошибке загрузки**
- В теге `<img/>` указывать js-обработчик события ошибочной загрузки картинки
- Если картинка не загрузилась, подставлять в "src" другую картинку
- Пример: `<img src="1.jpg" onerror="this.src='2.jpg';this.onerror=null"/>`

**PERF: Атрибут `decoding`**
- Как браузеру декодировать изображение
  - sync — синхронно, для отображения одновременно с другим содержимым
  - async — асинхронно, для уменьшения задержки в отображении другого содержимого
  - auto — решает браузер (по умолчанию)
- Как использовать
  - Если изображение на 1 экране — "sync"
  - Если изображение за пределами экрана — "async"
- Пример: `decoding="async"`

**PERF: Атрибут `fetchpriority`**
- Приоритет загрузки данного изображения перед другими изображениями
  - high — высокий
  - low — низкий (по умолчанию)
  - auto — решать браузеру
- Как браузер изменяет приоритет
  1. Изначально у изображений приоритет "low"
  2. Но когда построен layout, становится "high" для изображений в области видимости
- Как использовать
  - Если изображение на 1 экране — "high"
  - Если изображение за пределами экрана — "low"
- Пример: `fetchpriority="high"`

**PERF: Атрибут `loading`**
- Когда браузеру загружать картинку, которая находится за пределами области видимости
  - auto — решает браузер
  - eager — загружать сразу (по умолчанию)
  - lazy — загружать по мере приближения к области видимости
- Как использовать
  - Если изображение на 1 экране — "eager"
  - Если изображение за пределами экрана — "lazy"
- Пример: `loading="lazy"`

**PERF: Атрибут `rel`**
- Заранее загрузить картинку
- Пример: `<link rel="preload" as="image" href="cat.jpg"/>`



## Декоративные Изображения
**HTML: Вставка избражения**
- Декоративная графика вставляется в виде фона через CSS
- SVG можно использовать прямо HTML-разметке, если его внешний вид нужно менять стилями
- Пример: `background-image: url("cat.avif")`

**HTML: Тег**
- Можно использовать не `<img>`, а обычный `<div>`

**HTML: Пустое описание**
- Обязательно добавлять атрибут `alt`, но оставлять пустым, чтобы скрыть изображение от скринридеров

**HTML: Роль**
- Можно указать, что элемент предназначен для визуального взаимодействия и не является интерактивным
- Пример: `role="presentation"`

**HTML: Скрытие от скринридеров**
- Декоративные элементы нужно скрывать из дерева доступности (от скринридеров) с помощью `aria-hidden="true"`

**SVG: Файл (заливка)**
- В коде SVG-файла удалить атрибуты `fill` и управлять цветом иконок через CSS-свойство `fill`



## Источники
- [x] [Никита Дубко — img](https://www.youtube.com/watch?v=WfzKd16LplI)
- [x] [Best practices for images](https://github.com/nucliweb/image-element)
- [ ] [Михаил Непомнящий — Прогрессивные изображения](https://www.youtube.com/watch?v=mXxU_kGm_BQ)
